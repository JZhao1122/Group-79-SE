// 交易数据存储处理
public class TransactionStorage {
    private static final String TXN_FILE = "transactions.csv";
    
    public void saveTransaction(Transaction txn) throws IOException {
        try (FileWriter writer = new FileWriter(TXN_FILE, true)) {
            writer.write(String.format("%s,%s,%.2f,%s,%s\n",
                txn.getDate(),
                txn.getDescription(),
                txn.getAmount(),
                txn.getCategory(),
                txn.getPaymentMethod()));
        }
    }
    
    public List<Transaction> loadTransactions() throws IOException {
        List<Transaction> txns = new ArrayList<>();
        Path path = Paths.get(TXN_FILE);
        
        if (Files.exists(path)) {
            List<String> lines = Files.readAllLines(path);
            for (String line : lines) {
                String[] parts = line.split(",");
                Transaction txn = new Transaction(
                    LocalDate.parse(parts[0]),
                    parts[1],
                    Double.parseDouble(parts[2]),
                    parts[3],
                    parts[4]
                );
                txns.add(txn);
            }
        }
        
        return txns;
    }
}
